# 雷雨天气系统使用指南

## 音频文件准备

在项目根目录放置以下3个音频文件：

```
thunderstorm.mp3  - 雷声音效
rain.mp3         - 雨声音效（循环播放）
wind.mp3         - 风声音效（循环播放）
```

## 音频文件推荐

### 1. thunderstorm.mp3- 雷声
- **时长**：3-5秒
- **特点**：真实的雷鸣声，从远到近
- **搜索关键词**：thunder sound, thunderclap, lightning strike
- **推荐网站**：Pixabay, Freesound

### 2. rain.mp3 - 雨声
- **时长**：30-60秒（会循环）
- **特点**：持续的雨滴声，中等雨量
- **搜索关键词**：rain sound, rainfall, rain loop
- **推荐网站**：Pixabay, Freesound

### 3. wind.mp3- 风声
- **时长**：30-60秒（会循环）
- **特点**：呼啸的风声，不要太强烈
- **搜索关键词**：wind sound, breeze, wind loop
- **推荐网站**：Pixabay, Freesound

## 快速下载链接

访问 **Pixabay**: https://pixabay.com/sound-effects/

1. 搜索 "thunder" → 下载为 `thunderstorm.mp3`
2. 搜索 "rain" → 下载为 `rain.mp3`
3. 搜索 "wind" → 下载为 `wind.mp3`

## 效果说明

### 点击触发流程

1. **点击屏幕空白处**
2. **50%概率**：
   - 有风：播放风声 → 1秒后打雷 → 3秒后下雨
   - 无风：立即打雷 → 3秒后下雨

### 视觉效果

#### 打雷阶段（3秒）
- 点击位置出现主闪电（向下延伸200-500px）
- 2-4条分支闪电（随机角度）
- 点击位置扩散的光圈
- 全屏闪烁（模拟真实闪电）
- 连续3次闪电（间隔0.5秒和1.2秒）

#### 下雨阶段（10秒）
- 每50毫秒生成5个雨滴
- 雨滴从屏幕顶部落下
- 半透明蓝白色
- 自然的下落速度

### 音频效果

- **雷声**：音量60%，单次播放，持续3秒
- **雨声**：音量40%，循环播放，持续10秒
- **风声**：音量30%，循环播放，持续整个过程

### 性能优化

✅ **自动清理**：
- 点击新位置时，立即停止旧的天气效果
- 移除所有旧的DOM元素
- 停止并重置旧的音频

✅ **防快速点击**：
- 1秒冷却时间
- 避免性能问题

✅ **元素管理**：
- 雨滴1秒后自动移除
- 闪电0.6秒后自动移除
- 闪光0.8秒后自动移除

## 测试步骤

1. 将3个音频文件放到项目根目录
2. 刷新页面
3. 点击屏幕空白处（避开导航和按钮）
4. 观察效果：
   - 可能先听到风声
   - 1秒后或立即看到闪电+听到雷声
   - 3秒后开始下雨+听到雨声
   - 10秒后自动停止

## 注意事项

- 音频文件必须放在项目根目录
- 文件名必须完全匹配（区分大小写）
- 如果音频文件不存在，视觉效果仍然正常工作
- 浏览器可能需要用户交互后才能播放音频
- 建议使用 MP3 格式（兼容性最好）

## 自定义

如果想调整效果，可以修改以下参数：

```javascript
// 音量调整
audioFiles.thunder.volume = 0.6;  // 雷声音量 (0-1)
audioFiles.rain.volume = 0.4;     // 雨声音量 (0-1)
audioFiles.wind.volume = 0.3;     // 风声音量 (0-1)

// 时间调整
const clickCooldown = 1000;       // 点击冷却时间（毫秒）
setTimeout(() => startRain(), 3000);  // 打雷后多久开始下雨
setTimeout(() => clearWeather(), 10000);  // 下雨持续时间
```
