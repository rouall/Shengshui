<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHENGSHUI | 发现每一滴的价值</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="./fonts/fonts.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="./favicon.png">
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?71c37b1b7082560076dbd18b68b05cdb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

    <style>
        :root {
            --theme-color: #00d2ff; /* 默认水蓝色 */
        }
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: #000;
            overflow-x: hidden;
            transition: all 1s ease;
        }

        /* --- 双视频背景核心样式 --- */
        .video-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2; overflow: hidden;
        }
        .bg-video {
            position: absolute; top: 50%; left: 50%;
            min-width: 100%; min-height: 100%;
            width: 100%; height: 100%;
            transform: translate(-50%, -50%) scale(1.1); /* 微放大避免边缘 */
            object-fit: cover;
            transition: opacity 1.5s ease-in-out; /* 电影级溶解过渡 */
        }
        /* 使用背景图片替代视频，并添加动画效果 */
        .bg-video {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        #video-desert {
            opacity: 1; z-index: 1;
            background-image: url('resource/images/desert/photo-1451418280345-67a6b4d10bba.avif');
            animation: desert-sway 20s ease-in-out infinite;
        }
        
        #video-dew {
            opacity: 0; z-index: 2;
            background-image: url('resource/images/dew/photo-1523712999610-f77fbcfc3843.avif');
            animation: dew-shimmer 15s ease-in-out infinite;
        }
        
        #video-ice {
            opacity: 0; z-index: 3;
            background-image: url('resource/images/ice/photo-1459666644539-a9755287d6b0.avif');
            animation: glacier-glow 25s ease-in-out infinite;
        }

        #video-water {
            opacity: 0; z-index: 4;
            background-image: url('resource/images/water/photo-1497436072909-60f360e1d4b1.avif');
            animation: water-drift 22s ease-in-out infinite;
        }

        #video-star {
            opacity: 0; z-index: 5;
            background-image: url('resource/images/star/photo-1562499332-64827643864f.avif');
            animation: star-twinkle 30s ease-in-out infinite;
        }
        
        /* 背景动画 - 高清晰动态效果 */
        @keyframes desert-sway {
            0%, 100% { 
                background-position: 50% 50%; 
                transform: translate(-50%, -50%) scale(1.15); 
            }
            50% { 
                background-position: 52% 48%; 
                transform: translate(-50%, -50%) scale(1.18); 
            }
        }
        
        @keyframes dew-shimmer {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1.12); 
                background-position: 50% 50%;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.15); 
                background-position: 48% 52%;
            }
        }
        
        @keyframes glacier-glow {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1.13) rotate(0deg); 
                background-position: 50% 50%;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.16) rotate(0.5deg); 
                background-position: 51% 49%;
            }
        }

        @keyframes water-drift {
            0%, 100% { 
                background-position: 50% 48%; 
                transform: translate(-50%, -50%) scale(1.14); 
            }
            50% { 
                background-position: 50% 52%; 
                transform: translate(-50%, -50%) scale(1.17); 
            }
        }

        @keyframes star-twinkle {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1.16); 
                background-position: 50% 50%;
            }
            33% { 
                transform: translate(-50%, -50%) scale(1.18); 
                background-position: 49% 51%;
            }
            66% { 
                transform: translate(-50%, -50%) scale(1.14); 
                background-position: 51% 49%;
            }
        }

        /* 当激活晨露模式时 */
        body.dew-mode #video-desert { opacity: 0; }
        body.dew-mode #video-dew { opacity: 1; }
        body.dew-mode #video-ice { opacity: 0; }
        body.dew-mode #video-water { opacity: 0; }

        /* 当激活冰川模式时 */
        body.ice-mode #video-desert { opacity: 0; }
        body.ice-mode #video-dew { opacity: 0; }
        body.ice-mode #video-ice { opacity: 1; }
        body.ice-mode #video-water { opacity: 0; }

        /* 当激活水域模式时 */
        body.water-mode #video-desert { opacity: 0; }
        body.water-mode #video-dew { opacity: 0; }
        body.water-mode #video-ice { opacity: 0; }
        body.water-mode #video-water { opacity: 1; }
        body.water-mode #video-star { opacity: 0; }

        /* 当激活星空模式时 */
        body.star-mode #video-desert { opacity: 0; }
        body.star-mode #video-dew { opacity: 0; }
        body.star-mode #video-ice { opacity: 0; }
        body.star-mode #video-water { opacity: 0; }
        body.star-mode #video-star { opacity: 1; }

        /* 动态遮罩层：轻微色彩增强，保持图片清晰 */
        .overlay-dynamic {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at 50% 50%, rgba(255, 166, 0, 0.08) 0%, rgba(0,0,0,0.45) 100%);
            transition: background 1.5s ease;
        }
        body.dew-mode .overlay-dynamic {
            background: radial-gradient(circle at 50% 50%, rgba(0, 210, 255, 0.08) 0%, rgba(0,0,0,0.4) 100%);
        }
        body.ice-mode .overlay-dynamic {
            background: radial-gradient(circle at 50% 50%, rgba(135, 206, 250, 0.08) 0%, rgba(0,0,0,0.48) 100%);
        }
        body.water-mode .overlay-dynamic {
            background: radial-gradient(circle at 50% 50%, rgba(0, 255, 200, 0.08) 0%, rgba(0,0,0,0.42) 100%);
        }
        body.star-mode .overlay-dynamic {
            background: radial-gradient(circle at 50% 50%, rgba(138, 43, 226, 0.12) 0%, rgba(0,0,0,0.5) 100%);
        }

        #fx-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            opacity: 1;
            transition: opacity 1.5s ease;
        }

        /* --- 导航与文字 --- */
        .glass-nav {
            background: transparent;
            backdrop-filter: none;
            border-bottom: none;
        }
        .hero-title {
            font-family: 'Cinzel', serif; /* 使用更具神圣感的字体 */
            letter-spacing: 0.15em;
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        /* 动态文字颜色切换 */
        .dynamic-text { transition: color 1.5s ease; color: #ffbd59; } /* 沙漠金 */
        body.dew-mode .dynamic-text { color: #00d2ff; } /* 晨露蓝 */
        body.ice-mode .dynamic-text { color: #87cefa; } /* 冰川浅蓝 */
        body.water-mode .dynamic-text { color: #00ffd5; } /* 水域奢华薄荷青 */
        body.star-mode .dynamic-text { color: #b19cd9; } /* 星空奢华紫 */

        /* --- 沙漠风沙效果 - 已禁用，保持图片清晰 --- */
        .sandstorm {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            display: none;
        }

        /* --- 晨露闪烁效果 - 已禁用，保持图片清晰 --- */
        .dew-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            display: none;
        }

        /* --- 冰川冰晶效果 - 已禁用，保持图片清晰 --- */
        .glacier-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            display: none;
        }

        /* --- 星空流星效果 - 轻微星云，保持图片清晰 --- */
        .star-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            display: none;
        }

        /* --- 液态感应按钮 --- */
        .btn-liquid {
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: 2px solid rgba(255,255,255,0.4);
            overflow: hidden;
            transition: all 0.5s;
            backdrop-filter: blur(8px);
        }
        .btn-liquid::before {
            content: '';
            position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: all 0.6s;
        }
        .btn-liquid:hover {
            border-color: var(--theme-color);
            box-shadow: 0 0 30px var(--theme-color);
            transform: translateY(-3px);
        }
        .btn-liquid:hover::before { left: 100%; }
        body.dew-mode .btn-liquid:hover { --theme-color: #00d2ff; }
        body.ice-mode .btn-liquid:hover { --theme-color: #87cefa; }
        body.water-mode .btn-liquid:hover { --theme-color: #00ffd5; }
        body.star-mode .btn-liquid:hover { --theme-color: #b19cd9; }
        body:not(.dew-mode):not(.ice-mode):not(.water-mode):not(.star-mode) .btn-liquid:hover { --theme-color: #ffbd59; }

        .nav-panel-backdrop {
            position: fixed;
            inset: 0;
            z-index: 60;
            background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.08) 0%, rgba(0,0,0,0.88) 55%, rgba(0,0,0,0.92) 100%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 420ms ease;
        }
        .nav-panel-backdrop.show {
            opacity: 1;
            pointer-events: auto;
        }

        .nav-panel {
            position: absolute;
            left: 50%;
            top: 50%;
            width: min(980px, calc(100% - 2.5rem));
            transform: translate(-50%, calc(-50% + 14px));
            opacity: 0;
            transition: opacity 420ms ease, transform 420ms ease;
        }
        .nav-panel-backdrop.show .nav-panel {
            opacity: 1;
            transform: translate(-50%, -50%);
        }

        .nav-panel-shell {
            border-radius: 28px;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255,255,255,0.22);
            -webkit-backdrop-filter: blur(22px) saturate(1.18);
            backdrop-filter: blur(22px) saturate(1.18);
            box-shadow:
                0 28px 110px rgba(0,0,0,0.45),
                inset 0 1px 0 rgba(255,255,255,0.28),
                inset 0 -1px 0 rgba(255,255,255,0.08);
            overflow: hidden;
        }

        .nav-panel-hairline {
            height: 1px;
            width: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent);
        }

        .nav-panel-close {
            appearance: none;
            border: 1px solid rgba(255,255,255,0.16);
            background: rgba(0,0,0,0.35);
            color: rgba(255,255,255,0.85);
            border-radius: 999px;
            padding: 10px 14px;
            transition: transform 220ms ease, border-color 220ms ease, color 220ms ease;
        }
        .nav-panel-close:hover {
            transform: translateY(-1px);
            border-color: rgba(255,255,255,0.28);
            color: rgba(255,255,255,1);
        }

        .nav-chip {
            border: 1px solid rgba(255,255,255,0.14);
            background: rgba(255,255,255,0.04);
        }

        /* --- 视差容器 --- */
        .parallax-layer {
            transition: transform 0.1s ease-out;
        }

        /* --- 文字动画 --- */
        .hero-title .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(30px);
            filter: blur(10px);
            animation: charFadeIn 0.8s ease forwards;
        }

        @keyframes charFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0);
            }
        }

        /* --- 闪电效果 --- */
        #lightning-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        .screen-flash {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.7);
            pointer-events: none;
            z-index: 98;
            animation: screenFlash 0.2s ease-out;
        }

        @keyframes screenFlash {
            0%, 100% { opacity: 0; }
            10%, 30%, 50% { opacity: 1; }
            20%, 40% { opacity: 0.3; }
        }

        /* --- 页面震动效果 --- */
        @keyframes thunderShake {
            0%, 100% { transform: translate(0, 0); }
            2% { transform: translate(-4px, 3px); }
            4% { transform: translate(4px, -3px); }
            6% { transform: translate(-3px, 4px); }
            8% { transform: translate(3px, -4px); }
            10% { transform: translate(-4px, 2px); }
            12% { transform: translate(4px, -2px); }
            14% { transform: translate(-2px, 3px); }
            16% { transform: translate(2px, -3px); }
            18% { transform: translate(-3px, 2px); }
            20% { transform: translate(3px, -2px); }
            22% { transform: translate(-2px, 4px); }
            24% { transform: translate(2px, -4px); }
            26% { transform: translate(-4px, 1px); }
            28% { transform: translate(4px, -1px); }
            30% { transform: translate(-3px, 3px); }
            32% { transform: translate(3px, -3px); }
            34% { transform: translate(-2px, 2px); }
            36% { transform: translate(2px, -2px); }
            38% { transform: translate(-3px, 1px); }
            40% { transform: translate(3px, -1px); }
            42% { transform: translate(-2px, 3px); }
            44% { transform: translate(2px, -3px); }
            46% { transform: translate(-3px, 2px); }
            48% { transform: translate(3px, -2px); }
            50% { transform: translate(-2px, 2px); }
            52% { transform: translate(2px, -2px); }
            54% { transform: translate(-3px, 1px); }
            56% { transform: translate(3px, -1px); }
            58% { transform: translate(-2px, 2px); }
            60% { transform: translate(2px, -2px); }
            62% { transform: translate(-2px, 1px); }
            64% { transform: translate(2px, -1px); }
            66% { transform: translate(-1px, 2px); }
            68% { transform: translate(1px, -2px); }
            70% { transform: translate(-2px, 1px); }
            72% { transform: translate(2px, -1px); }
            74% { transform: translate(-1px, 2px); }
            76% { transform: translate(1px, -2px); }
            78% { transform: translate(-2px, 1px); }
            80% { transform: translate(2px, -1px); }
            82% { transform: translate(-1px, 1px); }
            84% { transform: translate(1px, -1px); }
            86% { transform: translate(-1px, 1px); }
            88% { transform: translate(1px, -1px); }
            90% { transform: translate(-1px, 1px); }
            92% { transform: translate(1px, -1px); }
            94% { transform: translate(-1px, 0px); }
            96% { transform: translate(1px, 0px); }
            98% { transform: translate(-1px, 0px); }
        }

        body.thunder-shake {
            animation: thunderShake 4s ease-in-out;
        }

        /* --- 雨滴效果 --- */
        .rain-drop {
            position: fixed;
            top: -10px;
            width: 2px;
            height: 40px;
            background: linear-gradient(to bottom,
                transparent 0%,
                rgba(180, 220, 255, 0.8) 20%,
                rgba(200, 230, 255, 0.9) 50%,
                rgba(180, 220, 255, 0.6) 80%,
                transparent 100%
            );
            pointer-events: none;
            z-index: 50;
            animation: rainFall linear forwards;
            opacity: 0.7;
        }

        @keyframes rainFall {
            0% {
                transform: translateY(0);
                opacity: 0.7;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* --- 水波纹效果 --- */
        .water-ripple-effect {
            position: fixed;
            border-radius: 50%;
            border: 1px solid rgba(180, 220, 255, 0.6);
            pointer-events: none;
            z-index: 49;
            animation: rippleSpread 1.5s ease-out forwards;
        }

        @keyframes rippleSpread {
            0% {
                width: 4px;
                height: 4px;
                opacity: 0.8;
                transform: translate(-50%, -50%);
            }
            100% {
                width: 60px;
                height: 60px;
                opacity: 0;
                transform: translate(-50%, -50%);
            }
        }

        /* --- 按钮水波纹 --- */
        .btn-liquid {
            position: relative;
            overflow: hidden;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: rippleEffect 0.8s ease-out;
            pointer-events: none;
        }

        @keyframes rippleEffect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

    </style>
</head>
<body id="main-body" class="text-white h-screen flex flex-col">

    <div class="video-container">
        <!-- 使用背景图片替代视频，避免跨域问题 -->
        <div id="video-desert" class="bg-video"></div>
        <div id="video-dew" class="bg-video"></div>
        <div id="video-ice" class="bg-video"></div>
        <div id="video-water" class="bg-video"></div>
        <div id="video-star" class="bg-video"></div>
    </div>
    <div class="overlay-dynamic"></div>
    <canvas id="fx-canvas"></canvas>
    <div class="sandstorm"></div>
    <div class="dew-effect"></div>
    <div class="glacier-effect"></div>
    <div class="star-effect"></div>


    <nav class="glass-nav flex justify-between items-center px-8 py-6 fixed w-full z-50">
        <div class="text-3xl font-bold tracking-[0.2em] hero-title dynamic-text">SHENGSHUI</div>
        <div class="hidden md:flex space-x-12 text-xs tracking-[0.2em] uppercase font-medium">
            <a href="#" class="hover:text-white/70 transition" data-nav-panel="source">The Source</a>
            <a href="#" class="hover:text-white/70 transition" data-nav-panel="purification">Purification</a>
            <a href="#" class="hover:text-white/70 transition" data-nav-panel="lifestyle">Lifestyle</a>
        </div>
    </nav>

    <main class="flex-grow flex flex-col justify-center items-center text-center px-4 relative z-10">
        
        <div id="sub-headline" class="text-sm md:text-base tracking-[0.5em] uppercase mb-6 font-light dynamic-text transition-all duration-1000">
            · 感受生命的极度渴望 ·
        </div>

        <h1 class="text-6xl md:text-9xl hero-title mb-10 leading-none">
            圣水<br>
            <span class="dynamic-text font-thin block mt-2 text-4xl md:text-6xl">SHENGSHUI</span>
        </h1>

        <p id="hero-desc" class="text-lg md:text-2xl text-gray-200 max-w-2xl font-light italic mb-16 transition-all duration-1000 h-20 flex items-center justify-center">
            发现每一滴的价值。
        </p>

        <div class="flex flex-col md:flex-row space-y-5 md:space-y-0 md:space-x-8">
            <a href="./products.html" class="btn-liquid px-14 py-5 rounded-full text-lg font-bold tracking-widest" id="cta-button">
                即刻润泽感官
            </a>
        </div>

    </main>

    <div id="nav-panel-backdrop" class="nav-panel-backdrop">
        <div class="nav-panel">
            <div class="nav-panel-shell">
                <div class="px-7 md:px-10 pt-8 md:pt-10 pb-7 md:pb-9">
                    <div class="flex items-start justify-between gap-6">
                        <div>
                            <div id="nav-panel-kicker" class="text-[11px] tracking-[0.55em] uppercase text-white/60">THE SOURCE</div>
                            <div id="nav-panel-title" class="hero-title text-2xl md:text-4xl mt-4 leading-tight">以水源定义奢侈标准</div>
                        </div>
                        <button id="nav-panel-close" class="nav-panel-close text-xs tracking-[0.25em] uppercase">Close</button>
                    </div>
                    <div class="mt-7 md:mt-8 nav-panel-hairline"></div>
                    <div class="mt-7 md:mt-8 grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-10">
                        <div class="md:col-span-7">
                            <div id="nav-panel-lead" class="text-base md:text-lg text-white/80 leading-relaxed">
                                一瓶水的价值，从来不止于解渴，而在于它所承载的地貌、时间与纯度。
                            </div>
                            <div id="nav-panel-body" class="mt-6 text-sm md:text-base text-white/60 leading-relaxed space-y-5">
                                <div>我们以“源头可追溯”为第一原则：从产地环境、矿物结构到微量元素比例，形成稳定且可被验证的风味与口感轮廓。</div>
                                <div>真正的奢侈，是选择更少的干预，让自然完成更多的工作——让每一滴都拥有清晰的身份。</div>
                            </div>
                        </div>
                        <div class="md:col-span-5">
                            <div class="grid grid-cols-1 gap-4">
                                <div class="nav-chip rounded-2xl px-6 py-5">
                                    <div class="text-[11px] tracking-[0.45em] uppercase text-white/55">Traceability</div>
                                    <div class="mt-3 text-white/80 text-sm leading-relaxed">水源地信息透明可验证，标准化记录与长期稳定性控制。</div>
                                </div>
                                <div class="nav-chip rounded-2xl px-6 py-5">
                                    <div class="text-[11px] tracking-[0.45em] uppercase text-white/55">Mineral Profile</div>
                                    <div class="mt-3 text-white/80 text-sm leading-relaxed">矿物结构决定口感层次：柔和、清冽、回甘与余韵的秩序。</div>
                                </div>
                                <div class="nav-chip rounded-2xl px-6 py-5">
                                    <div class="text-[11px] tracking-[0.45em] uppercase text-white/55">Ritual</div>
                                    <div class="mt-3 text-white/80 text-sm leading-relaxed">把饮水从“日常动作”提升为“仪式”，在细节中感知自我与世界。</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="absolute bottom-8 w-full text-center text-xs text-white/40 tracking-widest uppercase z-20">
        Copyright ©2025 Shengshui All Rights Reserved. <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">京ICP备15004867号-3</a>
    </footer>

    <script>
        // ========================================
        // 雷雨天气系统 - 真实闪电效果
        // ========================================
        let currentWeather = null;
        let weatherTimeout = null;
        let currentAudio = null;
        let lastClickTime = 0;
        const clickCooldown = 1000;

        // 创建闪电画布
        const lightningCanvas = document.createElement('canvas');
        lightningCanvas.id = 'lightning-canvas';
        document.body.appendChild(lightningCanvas);
        const ctx = lightningCanvas.getContext('2d');

        // 调整画布大小
        function resizeLightningCanvas() {
            lightningCanvas.width = window.innerWidth;
            lightningCanvas.height = window.innerHeight;
        }
        resizeLightningCanvas();
        window.addEventListener('resize', resizeLightningCanvas);

        // 音频管理 - 使用本地音频文件
        const audioFiles = {
            thunder: new Audio('resource/sounds/thunderstorm.mp3'),
            rain: new Audio('resource/sounds/rain.mp3'),
            wind: new Audio('resource/sounds/wind.mp3')
        };

        // 设置音频循环
        audioFiles.rain.loop = true;
        audioFiles.wind.loop = true;
        audioFiles.thunder.loop = false;

        // 设置音量
        audioFiles.thunder.volume = 0.6;
        audioFiles.rain.volume = 0.4;
        audioFiles.wind.volume = 0.3;

        // 音频加载错误处理
        Object.keys(audioFiles).forEach(key => {
            audioFiles[key].addEventListener('error', (e) => {
                console.warn(`❌ 音频文件 ${key} 加载失败：${audioFiles[key].src}`);
            });
            audioFiles[key].addEventListener('canplaythrough', () => {
                console.log(`✓ 音频文件 ${key} 加载成功`);
            });
        });

        // 停止并清理音频
        function stopAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
        }

        // 停止所有音频
        function stopAllAudio() {
            Object.keys(audioFiles).forEach(key => {
                audioFiles[key].pause();
                audioFiles[key].currentTime = 0;
            });
            currentAudio = null;
        }

        // 播放音频（单独播放）
        function playAudio(type) {
            stopAudio();
            currentAudio = audioFiles[type];
            currentAudio.currentTime = 0;
            currentAudio.play()
                .then(() => console.log(`播放音频: ${type}`))
                .catch(e => console.warn(`音频播放失败 (${type}):`, e.message));
        }

        // 播放多个音频（同时播放）
        function playMultipleAudio(types) {
            stopAllAudio();
            types.forEach(type => {
                audioFiles[type].currentTime = 0;
                audioFiles[type].play()
                    .then(() => console.log(`播放音频: ${type}`))
                    .catch(e => console.warn(`音频播放失败 (${type}):`, e.message));
            });
        }

        // 清理天气效果
        function clearWeather() {
            if (weatherTimeout) {
                clearTimeout(weatherTimeout);
                weatherTimeout = null;
            }
            
            // 清除闪电画布
            ctx.clearRect(0, 0, lightningCanvas.width, lightningCanvas.height);
            
            // 移除所有天气元素
            document.querySelectorAll('.screen-flash, .rain-drop, .water-ripple-effect').forEach(el => el.remove());
            
            // 停止所有音频
            stopAllAudio();
            
            currentWeather = null;
        }

        // 点击触发天气
        document.addEventListener('click', (e) => {
            // 避免点击导航等元素
            if (e.target.closest('nav') || e.target.closest('a') || e.target.closest('button')) {
                return;
            }

            // 只在沙漠模式（currentMode === 0）时触发雷雨效果
            if (currentMode !== 0) {
                console.log('当前不是沙漠模式，雷雨效果已禁用');
                return;
            }

            const now = Date.now();
            if (now - lastClickTime < clickCooldown) {
                return;
            }
            lastClickTime = now;

            console.log('触发天气效果，位置:', e.clientX, e.clientY);

            // 清理旧的天气效果
            clearWeather();

            // 随机决定是否有风
            const hasWind = Math.random() > 0.5;
            
            if (hasWind) {
                console.log('天气类型: 有风雷暴');
                startWindyThunderstorm(e.clientX, e.clientY);
            } else {
                console.log('天气类型: 无风雷暴');
                startThunderstorm(e.clientX, e.clientY);
            }
        });

        // 开始雷暴（带风）
        function startWindyThunderstorm(x, y) {
            currentWeather = 'windy-storm';
            
            // 立即打雷
            playAudio('thunder');
            createThunderSequence(x, y);
            
            // 3秒后开始下雨
            weatherTimeout = setTimeout(() => {
                startRain(true); // 传入true表示有风
            }, 3000);
        }

        // 开始雷暴（无风）
        function startThunderstorm(x, y) {
            currentWeather = 'storm';
            
            // 立即打雷
            playAudio('thunder');
            createThunderSequence(x, y);
            
            // 3秒后开始下雨
            weatherTimeout = setTimeout(() => {
                startRain(false); // 传入false表示无风
            }, 3000);
        }

        // 创建雷电序列
        function createThunderSequence(x, y) {
            // 第一次闪电 - 屏幕随机位置
            const x1 = 200 + Math.random() * (window.innerWidth - 400);
            drawLightning(x1);
            
            // 0.6秒后第二次
            setTimeout(() => {
                const x2 = 200 + Math.random() * (window.innerWidth - 400);
                drawLightning(x2);
            }, 600);
            
            // 1.5秒后第三次
            setTimeout(() => {
                const x3 = 200 + Math.random() * (window.innerWidth - 400);
                drawLightning(x3);
            }, 1500);
        }

        // 绘制真实的树根状闪电
        function drawLightning(startX) {
            ctx.clearRect(0, 0, lightningCanvas.width, lightningCanvas.height);
            
            const startY = 0;
            const endY = lightningCanvas.height;
            
            // 触发页面震动
            document.body.classList.add('thunder-shake');
            setTimeout(() => {
                document.body.classList.remove('thunder-shake');
            }, 4000);
            
            // 绘制主闪电路径
            drawLightningBolt(startX, startY, startX + (Math.random() - 0.5) * 100, endY, 6);
            
            // 创建全屏闪光
            createScreenFlash();
            
            // 闪烁效果
            let flickers = 0;
            const flickerInterval = setInterval(() => {
                if (flickers % 2 === 0) {
                    ctx.globalAlpha = 0.3;
                    ctx.clearRect(0, 0, lightningCanvas.width, lightningCanvas.height);
                } else {
                    ctx.globalAlpha = 1;
                    drawLightningBolt(startX, startY, startX + (Math.random() - 0.5) * 100, endY, 6);
                }
                flickers++;
                if (flickers > 5) {
                    clearInterval(flickerInterval);
                    ctx.clearRect(0, 0, lightningCanvas.width, lightningCanvas.height);
                }
            }, 50);
        }

        // 递归绘制闪电分支（树根算法）
        function drawLightningBolt(x1, y1, x2, y2, depth) {
            if (depth === 0) return;
            
            const dx = x2 - x1;
            const dy = y2 - y1;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < 10) return;
            
            // 绘制主干
            ctx.save();
            ctx.strokeStyle = 'rgba(255, 255, 255, 1)';
            ctx.lineWidth = depth * 1.5;
            ctx.shadowBlur = 20;
            ctx.shadowColor = 'rgba(200, 220, 255, 1)';
            ctx.lineCap = 'round';
            
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            
            // 添加锯齿效果
            const segments = Math.floor(distance / 30);
            for (let i = 1; i <= segments; i++) {
                const t = i / segments;
                const midX = x1 + dx * t + (Math.random() - 0.5) * 30;
                const midY = y1 + dy * t;
                ctx.lineTo(midX, midY);
            }
            ctx.lineTo(x2, y2);
            ctx.stroke();
            
            // 发光效果
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.lineWidth = depth * 2.5;
            ctx.shadowBlur = 30;
            ctx.stroke();
            
            ctx.restore();
            
            // 随机生成分支
            const numBranches = depth > 4 ? 2 : (Math.random() > 0.6 ? 1 : 0);
            
            for (let i = 0; i < numBranches; i++) {
                const branchPoint = 0.3 + Math.random() * 0.4;
                const branchX = x1 + dx * branchPoint;
                const branchY = y1 + dy * branchPoint;
                
                const branchAngle = (Math.random() - 0.5) * Math.PI / 3;
                const branchLength = distance * (0.4 + Math.random() * 0.3);
                
                const angle = Math.atan2(dy, dx) + branchAngle;
                const branchEndX = branchX + Math.cos(angle) * branchLength;
                const branchEndY = branchY + Math.sin(angle) * branchLength;
                
                // 递归绘制分支
                drawLightningBolt(branchX, branchY, branchEndX, branchEndY, depth - 1);
            }
        }

        // 创建全屏闪光
        function createScreenFlash() {
            const flash = document.createElement('div');
            flash.className = 'screen-flash';
            document.body.appendChild(flash);
            
            setTimeout(() => flash.remove(), 300);
        }

        // 开始下雨
        function startRain(hasWind) {
            // 随机决定是否同时播放雨声和风声
            if (hasWind && Math.random() > 0.3) {
                // 70%概率同时播放雨声和风声
                playMultipleAudio(['rain', 'wind']);
                console.log('下雨模式: 雨声 + 风声');
            } else {
                // 只播放雨声
                playAudio('rain');
                console.log('下雨模式: 只有雨声');
            }
            
            // 创建雨滴
            const rainInterval = setInterval(() => {
                if (currentWeather === null) {
                    clearInterval(rainInterval);
                    return;
                }
                
                // 每次创建多个雨滴
                for (let i = 0; i < 5; i++) {
                    createRainDrop();
                }
            }, 50);

            // 10秒后停止下雨
            weatherTimeout = setTimeout(() => {
                clearInterval(rainInterval);
                clearWeather();
            }, 10000);
        }

        // 创建雨滴
        function createRainDrop() {
            const drop = document.createElement('div');
            drop.className = 'rain-drop';
            const x = Math.random() * window.innerWidth;
            drop.style.left = x + 'px';
            drop.style.animationDuration = (0.5 + Math.random() * 0.3) + 's';
            drop.style.animationDelay = (Math.random() * 0.2) + 's';
            document.body.appendChild(drop);
            
            // 雨滴落地后创建水波纹（性能优化：只有15%的雨滴产生波纹）
            if (Math.random() < 0.15) {
                const duration = parseFloat(drop.style.animationDuration) * 1000;
                setTimeout(() => {
                    // 水波纹只在页面下1/3区域出现
                    const rippleX = Math.random() * window.innerWidth;
                    const rippleY = window.innerHeight * (0.67 + Math.random() * 0.33); // 只在下1/3区域
                    createWaterRipple(rippleX, rippleY);
                }, duration * (0.8 + Math.random() * 0.2)); // 接近落地时间
            }
            
            setTimeout(() => drop.remove(), 1000);
        }

        // 创建水波纹效果
        function createWaterRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.className = 'water-ripple-effect';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            document.body.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 1500);
        }

        // ========================================
        // 1. 文字逐字出现动画
        // ========================================
        function initTextAnimation() {
            const line1 = document.getElementById('title-line1');
            const line2 = document.getElementById('title-line2');
            
            if (!line1 || !line2) return;
            
            const text1 = '圣水';
            const text2 = 'SHENGSHUI';
            
            line1.innerHTML = '';
            line2.innerHTML = '';
            
            text1.split('').forEach((char, i) => {
                const span = document.createElement('span');
                span.className = 'char';
                span.textContent = char;
                span.style.animationDelay = `${i * 0.1}s`;
                line1.appendChild(span);
            });
            
            text2.split('').forEach((char, i) => {
                const span = document.createElement('span');
                span.className = 'char';
                span.textContent = char;
                span.style.animationDelay = `${(text1.length + i) * 0.1}s`;
                line2.appendChild(span);
            });
        }

        // 页面加载后立即执行文字动画
        window.addEventListener('DOMContentLoaded', initTextAnimation);

        // ========================================
        // 2. 按钮水波纹效果
        // ========================================
        const ctaButton = document.getElementById('cta-button');
        
        if (ctaButton) {
            ctaButton.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const ripple = document.createElement('span');
                ripple.className = 'ripple';
                ripple.style.left = `${x}px`;
                ripple.style.top = `${y}px`;
                ripple.style.width = ripple.style.height = '10px';
                
                this.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 800);
            });
        }

        // ========================================
        // 3. 视差滚动效果
        // ========================================
        const parallaxLayer = document.querySelector('.parallax-layer');
        
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            if (parallaxLayer) {
                parallaxLayer.style.transform = `translateY(${scrolled * 0.3}px)`;
            }
        });

        // ========================================
        // 4. 音效系统（可选）
        // ========================================
        const sounds = {
            desert: null,
            dew: null,
            ice: null,
            water: null,
            star: null,
            hover: null,
            click: null
        };

        // 用户首次交互后启用音效
        document.addEventListener('click', function enableAudio() {
            audioEnabled = true;
            document.removeEventListener('click', enableAudio);
        }, { once: true });

        function playSound(type) {
            if (!audioEnabled || !sounds[type]) return;
            try {
                sounds[type].currentTime = 0;
                sounds[type].volume = 0.3;
                sounds[type].play().catch(() => {});
            } catch (e) {}
        }

        // 按钮音效
        if (ctaButton) {
            ctaButton.addEventListener('mouseenter', () => playSound('hover'));
            ctaButton.addEventListener('click', () => playSound('click'));
        }

        // --- 核心逻辑：四种模式切换（沙漠、晨露、冰川、水域） ---

        const body = document.getElementById('main-body');
        const subHeadline = document.getElementById('sub-headline');
        const heroDesc = document.getElementById('hero-desc');

        const navPanelBackdrop = document.getElementById('nav-panel-backdrop');
        const navPanelClose = document.getElementById('nav-panel-close');
        const navPanelKicker = document.getElementById('nav-panel-kicker');
        const navPanelTitle = document.getElementById('nav-panel-title');
        const navPanelLead = document.getElementById('nav-panel-lead');
        const navPanelBody = document.getElementById('nav-panel-body');

        const navPanelCopy = {
            source: {
                kicker: 'THE SOURCE',
                title: '以水源定义奢侈标准',
                lead: '一瓶水的价值，从来不止于解渴，而在于它所承载的地貌、时间与纯度。',
                body: [
                    '我们以“源头可追溯”为第一原则：从产地环境、矿物结构到微量元素比例，形成稳定且可被验证的风味与口感轮廓。',
                    '真正的奢侈，是选择更少的干预，让自然完成更多的工作——让每一滴都拥有清晰的身份。'
                ]
            },
            purification: {
                kicker: 'PURIFICATION',
                title: '净化，是对纯度的敬畏',
                lead: '纯净不是“无”，而是“恰到好处的保留”：去除杂质，保留自然的矿物秩序。',
                body: [
                    '我们采用多重物理净化与精密过滤策略，重点控制异味、浑浊与微粒，确保入口的清澈与层次。',
                    '每一次处理都以“低干预”为前提：不改变水的原生结构与风味骨架，让纯净回归本来。'
                ]
            },
            lifestyle: {
                kicker: 'LIFESTYLE',
                title: '把喝水变成你的奢华生活方式',
                lead: '水是你每天最稳定的投入，也是最容易被忽略的升级项。让它成为你生活质感的底色。',
                body: [
                    '从清晨第一口到夜晚收尾，我们建议以不同矿物轮廓匹配不同场景：醒脑、舒缓、搭配轻食或社交。',
                    '一个更好的饮水系统，意味着更清晰的节律与更高级的自我照顾：少而精，稳定且可持续。'
                ]
            }
        };

        function openNavPanel(key) {
            const c = navPanelCopy[key];
            if (!c) return;
            navPanelKicker.textContent = c.kicker;
            navPanelTitle.textContent = c.title;
            navPanelLead.textContent = c.lead;
            navPanelBody.innerHTML = c.body.map(t => `<div>${t}</div>`).join('');
            navPanelBackdrop.classList.add('show');
        }

        function closeNavPanel() {
            navPanelBackdrop.classList.remove('show');
        }

        document.querySelectorAll('[data-nav-panel]').forEach((a) => {
            a.addEventListener('click', (e) => {
                e.preventDefault();
                openNavPanel(a.getAttribute('data-nav-panel'));
            });
        });

        navPanelClose.addEventListener('click', () => closeNavPanel());
        navPanelBackdrop.addEventListener('click', (e) => {
            if (e.target === navPanelBackdrop) closeNavPanel();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeNavPanel();
        });

        const fxCanvas = document.getElementById('fx-canvas');

        class FXEngine {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d', { alpha: true });
                this.dpr = Math.min(window.devicePixelRatio || 1, 2);
                this.mode = 'desert';
                this.particles = [];
                this.bokeh = [];
                this.t = 0;
                this.last = performance.now();
                this.running = true;
                this.prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

                this.handleResize = this.handleResize.bind(this);
                window.addEventListener('resize', this.handleResize, { passive: true });
                this.handleResize();
                this.seed();

                if (this.prefersReduced) {
                    this.running = false;
                    this.clear();
                    return;
                }

                requestAnimationFrame((now) => this.frame(now));
            }

            handleResize() {
                const w = Math.max(1, window.innerWidth);
                const h = Math.max(1, window.innerHeight);
                this.w = w;
                this.h = h;
                this.canvas.width = Math.floor(w * this.dpr);
                this.canvas.height = Math.floor(h * this.dpr);
                this.ctx.setTransform(this.dpr, 0, 0, this.dpr, 0, 0);
                this.seed();
            }

            clear() {
                this.ctx.clearRect(0, 0, this.w, this.h);
            }

            setMode(mode) {
                this.mode = mode;
                this.seed(true);
            }

            seed(reset = false) {
                const area = this.w * this.h;
                const density = Math.max(0.6, Math.min(1.2, area / (1400 * 900)));
                const maxP = Math.floor(120 * density);
                const maxB = Math.floor(26 * density);

                if (reset) {
                    this.particles.length = 0;
                    this.bokeh.length = 0;
                }

                while (this.particles.length < maxP) {
                    this.particles.push(this.makeParticle());
                }
                while (this.particles.length > maxP) {
                    this.particles.pop();
                }
                while (this.bokeh.length < maxB) {
                    this.bokeh.push(this.makeBokeh());
                }
                while (this.bokeh.length > maxB) {
                    this.bokeh.pop();
                }
            }

            rand(a, b) {
                return a + Math.random() * (b - a);
            }

            makeParticle() {
                const p = {
                    x: this.rand(0, this.w),
                    y: this.rand(0, this.h),
                    vx: 0,
                    vy: 0,
                    r: this.rand(0.6, 2.2),
                    a: this.rand(0.05, 0.35),
                    tw: this.rand(0.5, 1.4),
                    ph: this.rand(0, Math.PI * 2)
                };
                return p;
            }

            makeBokeh() {
                const b = {
                    x: this.rand(-this.w * 0.2, this.w * 1.2),
                    y: this.rand(-this.h * 0.2, this.h * 1.2),
                    r: this.rand(30, 140),
                    a: this.rand(0.02, 0.10),
                    vx: this.rand(-6, 6),
                    vy: this.rand(-6, 6),
                    ph: this.rand(0, Math.PI * 2)
                };
                return b;
            }

            frame(now) {
                if (!this.running) return;
                const dt = Math.min(0.05, Math.max(0.001, (now - this.last) / 1000));
                this.last = now;
                this.t += dt;

                this.ctx.clearRect(0, 0, this.w, this.h);
                this.ctx.globalCompositeOperation = 'source-over';

                if (this.mode === 'desert') {
                    this.drawDesert(dt);
                } else if (this.mode === 'dew') {
                    this.drawDew(dt);
                } else if (this.mode === 'ice') {
                    this.drawIce(dt);
                } else if (this.mode === 'water') {
                    this.drawWater(dt);
                } else if (this.mode === 'star') {
                    this.drawStar(dt);
                }

                requestAnimationFrame((n) => this.frame(n));
            }

            drawDesert(dt) {
                const ctx = this.ctx;
                const wind = 70;
                const angle = -Math.PI / 12;
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);
                ctx.save();
                ctx.globalAlpha = 1;
                ctx.globalCompositeOperation = 'lighter';

                for (const p of this.particles) {
                    const speed = wind * (0.6 + 0.8 * p.tw);
                    p.vx = cos * speed;
                    p.vy = sin * speed + 6 * Math.sin(this.t * 0.8 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;

                    if (p.x > this.w + 60 || p.y < -60) {
                        p.x = -60;
                        p.y = this.rand(this.h * 0.15, this.h * 1.05);
                    }

                    const len = 10 + 28 * p.tw;
                    const x2 = p.x - cos * len;
                    const y2 = p.y - sin * len;
                    ctx.strokeStyle = `rgba(255, 210, 160, ${p.a * 0.55})`;
                    ctx.lineWidth = 0.9;
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                }

                ctx.restore();
            }

            drawDew(dt) {
                const ctx = this.ctx;
                ctx.save();
                ctx.globalCompositeOperation = 'screen';

                for (const b of this.bokeh) {
                    b.x += (b.vx * 0.15 + 10 * Math.sin(this.t * 0.35 + b.ph)) * dt;
                    b.y += (b.vy * 0.15 + 8 * Math.cos(this.t * 0.3 + b.ph)) * dt;

                    if (b.x < -this.w * 0.25) b.x = this.w * 1.25;
                    if (b.x > this.w * 1.25) b.x = -this.w * 0.25;
                    if (b.y < -this.h * 0.25) b.y = this.h * 1.25;
                    if (b.y > this.h * 1.25) b.y = -this.h * 0.25;

                    const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, b.r);
                    g.addColorStop(0, `rgba(210, 255, 250, ${b.a})`);
                    g.addColorStop(0.35, `rgba(160, 230, 255, ${b.a * 0.55})`);
                    g.addColorStop(1, 'rgba(0, 0, 0, 0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalCompositeOperation = 'lighter';
                for (const p of this.particles) {
                    p.vx = 8 + 10 * Math.sin(this.t * 0.8 + p.ph);
                    p.vy = -10 + 8 * Math.cos(this.t * 0.7 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    if (p.x > this.w + 30) p.x = -30;
                    if (p.y < -30) p.y = this.h + 30;

                    const r = 0.8 + 1.8 * (0.5 + 0.5 * Math.sin(this.t * 1.6 + p.ph));
                    ctx.fillStyle = `rgba(255, 255, 255, ${p.a * 0.35})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }

            drawIce(dt) {
                const ctx = this.ctx;
                ctx.save();
                ctx.globalCompositeOperation = 'screen';

                for (const p of this.particles) {
                    const driftX = 10 * Math.sin(this.t * 0.6 + p.ph);
                    p.vx = driftX;
                    p.vy = 18 + 22 * p.tw;
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    if (p.y > this.h + 40) {
                        p.y = -40;
                        p.x = this.rand(-20, this.w + 20);
                    }

                    const s = 0.6 + 1.2 * p.tw;
                    const tw = 0.45 + 0.55 * Math.sin(this.t * 2.2 + p.ph);
                    ctx.fillStyle = `rgba(235, 250, 255, ${(0.05 + 0.22 * tw) * 0.7})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, s, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalCompositeOperation = 'lighter';
                for (let i = 0; i < this.bokeh.length; i++) {
                    const b = this.bokeh[i];
                    b.x += 6 * Math.sin(this.t * 0.25 + b.ph) * dt;
                    b.y += 8 * Math.cos(this.t * 0.22 + b.ph) * dt;
                    const r = b.r * 0.75;
                    const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, r);
                    g.addColorStop(0, `rgba(255,255,255,${b.a * 0.55})`);
                    g.addColorStop(0.55, `rgba(180,230,255,${b.a * 0.35})`);
                    g.addColorStop(1, 'rgba(0,0,0,0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }

            drawWater(dt) {
                const ctx = this.ctx;
                ctx.save();
                ctx.globalCompositeOperation = 'screen';
                const w = this.w;
                const h = this.h;

                const t = this.t;
                const cx = w * 0.5;
                const cy = h * 0.55;
                const base = Math.max(w, h) * 0.8;
                for (let i = 0; i < 5; i++) {
                    const k = i + 1;
                    const r = base * (0.18 + 0.12 * k) * (1 + 0.02 * Math.sin(t * (0.4 + 0.1 * k)));
                    const ox = cx + Math.sin(t * (0.22 + 0.06 * k) + i) * w * 0.08;
                    const oy = cy + Math.cos(t * (0.18 + 0.05 * k) + i) * h * 0.06;
                    const g = ctx.createRadialGradient(ox, oy, 0, ox, oy, r);
                    g.addColorStop(0, `rgba(0, 255, 210, ${0.08 - i * 0.012})`);
                    g.addColorStop(0.45, `rgba(0, 210, 255, ${0.06 - i * 0.010})`);
                    g.addColorStop(1, 'rgba(0,0,0,0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(ox, oy, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalCompositeOperation = 'lighter';
                for (const p of this.particles) {
                    p.vx = 18 + 14 * Math.sin(t * 0.9 + p.ph);
                    p.vy = 4 + 8 * Math.cos(t * 0.8 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    if (p.x > w + 30) p.x = -30;
                    if (p.y > h + 30) p.y = -30;
                    const rr = 0.8 + 1.6 * p.tw;
                    ctx.fillStyle = `rgba(255,255,255,${p.a * 0.25})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, rr, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }

            drawStar(dt) {
                const ctx = this.ctx;
                ctx.save();
                
                // 绘制流星效果
                ctx.globalCompositeOperation = 'lighter';
                const meteorCount = Math.min(8, Math.floor(this.particles.length * 0.15));
                for (let i = 0; i < meteorCount; i++) {
                    const p = this.particles[i];
                    const speed = 180 + 120 * p.tw;
                    const angle = Math.PI / 4 + Math.sin(this.t * 0.3 + p.ph) * 0.2;
                    p.vx = Math.cos(angle) * speed;
                    p.vy = Math.sin(angle) * speed;
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;

                    // 流星出界后重置
                    if (p.x > this.w + 100 || p.y > this.h + 100) {
                        p.x = this.rand(-50, this.w * 0.3);
                        p.y = this.rand(-50, this.h * 0.3);
                    }

                    // 绘制流星尾迹
                    const len = 40 + 80 * p.tw;
                    const x2 = p.x - Math.cos(angle) * len;
                    const y2 = p.y - Math.sin(angle) * len;
                    
                    const grad = ctx.createLinearGradient(p.x, p.y, x2, y2);
                    grad.addColorStop(0, `rgba(255, 255, 255, ${p.a * 0.9})`);
                    grad.addColorStop(0.3, `rgba(200, 180, 255, ${p.a * 0.6})`);
                    grad.addColorStop(0.7, `rgba(138, 43, 226, ${p.a * 0.3})`);
                    grad.addColorStop(1, 'rgba(138, 43, 226, 0)');
                    
                    ctx.strokeStyle = grad;
                    ctx.lineWidth = 1.5 + 2 * p.tw;
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                    
                    // 流星头部光晕
                    const headGlow = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 4 + 6 * p.tw);
                    headGlow.addColorStop(0, `rgba(255, 255, 255, ${p.a})`);
                    headGlow.addColorStop(0.5, `rgba(200, 180, 255, ${p.a * 0.5})`);
                    headGlow.addColorStop(1, 'rgba(138, 43, 226, 0)');
                    ctx.fillStyle = headGlow;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 4 + 6 * p.tw, 0, Math.PI * 2);
                    ctx.fill();
                }

                // 绘制闪烁星星
                ctx.globalCompositeOperation = 'screen';
                for (let i = meteorCount; i < this.particles.length; i++) {
                    const p = this.particles[i];
                    
                    // 星星缓慢漂移
                    p.vx = 3 * Math.sin(this.t * 0.4 + p.ph);
                    p.vy = 2 * Math.cos(this.t * 0.35 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    
                    // 边界循环
                    if (p.x < -20) p.x = this.w + 20;
                    if (p.x > this.w + 20) p.x = -20;
                    if (p.y < -20) p.y = this.h + 20;
                    if (p.y > this.h + 20) p.y = -20;

                    // 闪烁效果
                    const twinkle = 0.3 + 0.7 * Math.abs(Math.sin(this.t * (1.5 + p.tw) + p.ph));
                    const r = (0.8 + 1.4 * p.tw) * twinkle;
                    
                    // 星星光晕
                    const starGlow = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, r * 3);
                    starGlow.addColorStop(0, `rgba(255, 255, 255, ${p.a * twinkle})`);
                    starGlow.addColorStop(0.4, `rgba(177, 156, 217, ${p.a * twinkle * 0.6})`);
                    starGlow.addColorStop(1, 'rgba(138, 43, 226, 0)');
                    ctx.fillStyle = starGlow;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, r * 3, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // 星星核心
                    ctx.fillStyle = `rgba(255, 255, 255, ${p.a * twinkle * 1.2})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                // 绘制星云光晕
                ctx.globalCompositeOperation = 'screen';
                for (const b of this.bokeh) {
                    b.x += 4 * Math.sin(this.t * 0.15 + b.ph) * dt;
                    b.y += 3 * Math.cos(this.t * 0.12 + b.ph) * dt;
                    
                    const pulse = 0.7 + 0.3 * Math.sin(this.t * 0.8 + b.ph);
                    const r = b.r * 0.6 * pulse;
                    const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, r);
                    g.addColorStop(0, `rgba(147, 112, 219, ${b.a * 0.4 * pulse})`);
                    g.addColorStop(0.4, `rgba(138, 43, 226, ${b.a * 0.25 * pulse})`);
                    g.addColorStop(1, 'rgba(75, 0, 130, 0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }
        }

        const fx = new FXEngine(fxCanvas);

        const bgLayers = {
            desert: document.getElementById('video-desert'),
            dew: document.getElementById('video-dew'),
            ice: document.getElementById('video-ice'),
            water: document.getElementById('video-water'),
            star: document.getElementById('video-star')
        };

        const imagePool = {
            desert: [
                'photo-1451418280345-67a6b4d10bba.avif',
                'photo-1470364798856-7a74180378dc.avif',
                'photo-1489493173507-6feea31f12ff.avif',
                'photo-1506316178580-fe3a431d65b5.avif',
                'photo-1531430550463-9658d67c492d.avif',
                'photo-1554147090-e1221a04a025.avif',
                'photo-1559160581-44bd4222d397.avif',
                'photo-1559586616-361e18714958.avif',
                'photo-1587321174565-73cffc72e10a.avif',
                'photo-1593956861273-5c74c3d0d8a8.avif'
            ],
            dew: [
                'photo-1470004914212-05527e49370b_compressed (1) (1)_compressed_compressed.jpeg',
                'photo-1482192596544-9eb780fc7f66.avif',
                'photo-1523712999610-f77fbcfc3843.avif',
                'photo-1591095595140-5d351fde3f1a.avif',
                'photo-1600539507015-b01a9f4284c2.avif',
                'photo-1603663716376-95642cc5db05.avif',
                'photo-1608958683988-b25e2b327bb4.avif',
                'photo-1620835827006-84fa63476dd9.avif',
                'photo-1632109204511-e1b3416f61a9.avif',
                'photo-1651766466581-ab0aa5f5ecdf.avif',
                'photo-1668351734682-cf7ea0dbc030.avif',
                'photo-1706414012102-cdc56450124a.avif'
            ],
            ice: [
                'ice.jpeg',
                'photo-1459666644539-a9755287d6b0.avif',
                'photo-1494564605686-2e931f77a8e2.avif',
                'photo-1507039915464-9d829b6d2d78.avif',
                'photo-1535752385016-16aa049b6a8d.avif',
                'photo-1690286629800-efe2a219343f.avif'
            ],
            water: [
                'photo-1497436072909-60f360e1d4b1.avif',
                'photo-1549285107-585b63dbcee8.avif',
                'photo-1588847249519-06a31e3428dd.avif',
                'photo-1615529328331-f8917597711f.avif',
                'photo-1657549918210-5390583fb598.avif',
                'photo-1657549918210-659580c024d7.avif'
            ],
            star: [
                'daniel-gomez-ePtTfotxsx4-unsplash.jpg',
                'photo-1562499332-64827643864f.avif',
                'photo-1697377389156-5624773d1a21.avif',
                'photo-1764877805075-c0cdcb2da65c.avif',
                'photo-1764970692776-ce5fb30a7509.avif',
                'photo-1765407990623-7c0fcbae38a7.avif',
                'photo-1765754431926-964ed45a41e9.avif',
                'thibault-henry-9wGI-g3rA-E-unsplash.jpg'
            ]
        };

        const lastPick = {
            desert: null,
            dew: null,
            ice: null,
            water: null,
            star: null
        };

        function pickRandom(mode) {
            const list = imagePool[mode] || [];
            if (!list.length) return null;

            if (list.length === 1) return list[0];

            let next = list[Math.floor(Math.random() * list.length)];
            if (lastPick[mode] && list.length > 1) {
                let guard = 0;
                while (next === lastPick[mode] && guard < 10) {
                    next = list[Math.floor(Math.random() * list.length)];
                    guard += 1;
                }
            }
            lastPick[mode] = next;
            return next;
        }

        function setRandomBackground(mode) {
            const file = pickRandom(mode);
            if (!file) return;
            const raw = `resource/images/${mode}/${file}`;
            const url = encodeURI(raw);
            bgLayers[mode].style.backgroundImage = `url('${url}')`;
        }

        // 定义四种模式的文案
        const content = {
            desert: {
                sub: "· 感受生命的极度渴望 ·",
                desc: "当世界干涸，唯有一滴纯净，值得你不远万里。"
            },
            dew: {
                sub: "· 沉浸自然的极致滋养 ·",
                desc: "源自晨曦微露的刹那，让每一个细胞重新呼吸。"
            },
            ice: {
                sub: "· 体验极地的纯净力量 ·",
                desc: "来自冰原深处的馈赠，历经千年淬炼的极致纯净。"
            },
            water: {
                sub: "· 源自自然的圣水 ·",
                desc: "以矿物与时间雕刻的层次感，入口即是高级的宁静。"
            },
            star: {
                sub: "· 汲取星辰的永恒之水 ·",
                desc: "如同夜空中的璀璨星河，每一滴都承载着宇宙的深邃与神秘。"
            }
        };

        let currentMode = 0; // 0=沙漠, 1=晨露, 2=冰川, 3=水域, 4=星空
        const modes = ['desert', 'dew', 'ice', 'water', 'star'];
        let modeIntervalId = null;

        function applyModeClass(nextMode) {
            body.classList.remove('dew-mode', 'ice-mode', 'water-mode', 'star-mode');

            if (nextMode === 'dew') {
                body.classList.add('dew-mode');
            } else if (nextMode === 'ice') {
                body.classList.add('ice-mode');
            } else if (nextMode === 'water') {
                body.classList.add('water-mode');
            } else if (nextMode === 'star') {
                body.classList.add('star-mode');
            }
        }

        function setThemeColor(nextMode) {
            const theme = {
                desert: '#ffbd59',
                dew: '#00d2ff',
                ice: '#87cefa',
                water: '#00ffd5',
                star: '#b19cd9'
            };
            document.documentElement.style.setProperty('--theme-color', theme[nextMode] || '#00d2ff');
        }

        function enterMode(nextMode) {
            applyModeClass(nextMode);
            setThemeColor(nextMode);
            setRandomBackground(nextMode);
            fx.setMode(nextMode);

            subHeadline.style.opacity = 0;
            heroDesc.style.opacity = 0;

            setTimeout(() => {
                subHeadline.innerText = content[nextMode].sub;
                heroDesc.innerText = content[nextMode].desc;
                subHeadline.style.opacity = 1;
                heroDesc.style.opacity = 1;
            }, 750);
        }

        function toggleMode() {
            currentMode = (currentMode + 1) % 5;
            const nextMode = modes[currentMode];
            enterMode(nextMode);
            
            // 清除旧的定时器
            if (modeIntervalId) {
                clearTimeout(modeIntervalId);
            }
            
            // 根据模式设置不同的切换时间
            const delay = (currentMode === 0) ? 15000 : 7000; // 沙漠模式显示15秒，其他模式7秒
            modeIntervalId = setTimeout(toggleMode, delay);
        }

        // 初始化：先落在沙漠，并随机一张沙漠图
        applyModeClass('desert');
        setThemeColor('desert');
        setRandomBackground('desert');
        fx.setMode('desert');
        setRandomBackground('dew');
        setRandomBackground('ice');
        setRandomBackground('water');
        setRandomBackground('star');

        // 设置定时切换，沙漠模式显示15秒
        setTimeout(() => {
            toggleMode();
        }, 15000);

    </script>
</body>
</html>