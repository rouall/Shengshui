<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHENGSHUI | 发现每一滴的价值</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="./fonts/fonts.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="./favicon.png">
    <style>
        :root {
            --theme-color: #00d2ff; /* 默认水蓝色 */
        }
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: #000;
            overflow-x: hidden;
            transition: all 1s ease;
        }

        /* --- 双视频背景核心样式 --- */
        .video-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2; overflow: hidden;
        }
        .bg-video {
            position: absolute; top: 50%; left: 50%;
            min-width: 100%; min-height: 100%;
            width: 100%; height: 100%;
            transform: translate(-50%, -50%) scale(1.1); /* 微放大避免边缘 */
            object-fit: cover;
            transition: opacity 1.5s ease-in-out; /* 电影级溶解过渡 */
        }
        /* 使用背景图片替代视频，并添加动画效果 */
        .bg-video {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        #video-desert {
            opacity: 1; z-index: 1; filter: contrast(1.3) brightness(0.9) sepia(0.2) saturate(1.2);
            background-image: url('resource/images/desert/photo-1451418280345-67a6b4d10bba.avif');
            animation: desert-sway 20s ease-in-out infinite;
        }
        
        #video-dew {
            opacity: 0; z-index: 2; filter: contrast(1.1) brightness(0.9);
            background-image: url('resource/images/dew/photo-1523712999610-f77fbcfc3843.avif');
            animation: dew-shimmer 15s ease-in-out infinite;
        }
        
        #video-ice {
            opacity: 0; z-index: 3; filter: contrast(1.3) brightness(0.8) saturate(0.8);
            background-image: url('resource/images/ice/photo-1459666644539-a9755287d6b0.avif');
            animation: glacier-glow 25s ease-in-out infinite;
        }

        #video-water {
            opacity: 0; z-index: 4; filter: contrast(1.2) brightness(0.85) saturate(1.1);
            background-image: url('resource/images/water/photo-1497436072909-60f360e1d4b1.avif');
            animation: water-drift 22s ease-in-out infinite;
        }
        
        /* 背景动画 */
        @keyframes desert-sway {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes dew-shimmer {
            0%, 100% { transform: translate(-50%, -50%) scale(1); filter: brightness(0.9); }
            50% { transform: translate(-50%, -50%) scale(1.05); filter: brightness(1.1); }
        }
        
        @keyframes glacier-glow {
            0%, 100% { filter: contrast(1.3) brightness(0.8) saturate(0.8); }
            50% { filter: contrast(1.5) brightness(1) saturate(1); }
        }

        @keyframes water-drift {
            0%, 100% { background-position: 50% 40%; transform: translate(-50%, -50%) scale(1.08); }
            50% { background-position: 50% 60%; transform: translate(-50%, -50%) scale(1.12); }
        }

        /* 当激活晨露模式时 */
        body.dew-mode #video-desert { opacity: 0; }
        body.dew-mode #video-dew { opacity: 1; }
        body.dew-mode #video-ice { opacity: 0; }
        body.dew-mode #video-water { opacity: 0; }

        /* 当激活冰川模式时 */
        body.ice-mode #video-desert { opacity: 0; }
        body.ice-mode #video-dew { opacity: 0; }
        body.ice-mode #video-ice { opacity: 1; }
        body.ice-mode #video-water { opacity: 0; }

        /* 当激活水域模式时 */
        body.water-mode #video-desert { opacity: 0; }
        body.water-mode #video-dew { opacity: 0; }
        body.water-mode #video-ice { opacity: 0; }
        body.water-mode #video-water { opacity: 1; }

        /* 动态遮罩层：沙漠时偏暖，晨露时偏冷，冰川时偏蓝 */
        .overlay-dynamic {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circleAtCenter, rgba(255, 166, 0, 0.2) 0%, rgba(0,0,0,0.6) 100%);
            transition: background 1.5s ease;
        }
        body.dew-mode .overlay-dynamic {
            background: radial-gradient(circleAtCenter, rgba(0, 210, 255, 0.2) 0%, rgba(0,0,0,0.5) 100%);
        }
        body.ice-mode .overlay-dynamic {
            background: radial-gradient(circleAtCenter, rgba(135, 206, 250, 0.2) 0%, rgba(0,0,0,0.7) 100%);
        }
        body.water-mode .overlay-dynamic {
            background: radial-gradient(circleAtCenter, rgba(0, 255, 200, 0.18) 0%, rgba(0,0,0,0.72) 100%);
        }

        #fx-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            opacity: 1;
            transition: opacity 1.5s ease;
        }

        /* --- 导航与文字 --- */
        .glass-nav {
            background: transparent;
            backdrop-filter: none;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .hero-title {
            font-family: 'Cinzel', serif; /* 使用更具神圣感的字体 */
            letter-spacing: 0.15em;
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        /* 动态文字颜色切换 */
        .dynamic-text { transition: color 1.5s ease; color: #ffbd59; } /* 沙漠金 */
        body.dew-mode .dynamic-text { color: #00d2ff; } /* 晨露蓝 */
        body.ice-mode .dynamic-text { color: #87cefa; } /* 冰川浅蓝 */
        body.water-mode .dynamic-text { color: #00ffd5; } /* 水域奢华薄荷青 */

        /* --- 沙漠风沙效果 --- */
        .sandstorm {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.5s ease;
            background: linear-gradient(90deg, transparent, rgba(210, 180, 140, 0.05), transparent),
                        linear-gradient(90deg, transparent 20%, rgba(160, 82, 45, 0.05), transparent 70%);
            background-size: 200% 100%;
            animation: sandstorm-slow 18s ease-in-out infinite;
        }
        /* 快速风沙层 - 模拟近地面强风 */
        .sandstorm::before {
            content: '';
            position: absolute; top: 0; left: 0; width: 200%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(244, 214, 172, 0.25), transparent),
                        linear-gradient(90deg, transparent 10%, rgba(222, 184, 135, 0.2), transparent 80%),
                        linear-gradient(90deg, transparent 30%, rgba(160, 82, 45, 0.15), transparent 60%);
            animation: sandstorm-fast 6s linear infinite;
        }
        @keyframes sandstorm-fast {
            0% { transform: translateX(-100%) translateY(0) rotateZ(0deg); opacity: 0.7; filter: blur(1px); }
            25% { opacity: 0.9; filter: blur(2px); }
            50% { opacity: 1; transform: translateX(-50%) translateY(-5px) rotateZ(0.5deg); filter: blur(3px); }
            75% { opacity: 0.9; filter: blur(2px); }
            100% { transform: translateX(0%) translateY(-10px) rotateZ(0deg); opacity: 0.7; filter: blur(1px); }
        }
        /* 中速风沙层 - 模拟中层风 */
        .sandstorm::after {
            content: '';
            position: absolute; top: 0; left: 0; width: 300%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(189, 155, 109, 0.2), transparent),
                        linear-gradient(90deg, transparent 20%, rgba(160, 82, 45, 0.15), transparent 70%),
                        linear-gradient(90deg, transparent 40%, rgba(210, 180, 140, 0.1), transparent 90%);
            animation: sandstorm-medium 10s linear infinite;
        }
        @keyframes sandstorm-medium {
            0% { transform: translateX(-150%) translateY(5px) rotateZ(0deg); opacity: 0.6; filter: blur(2px); }
            25% { opacity: 0.8; filter: blur(3px); }
            50% { opacity: 0.9; transform: translateX(-75%) translateY(0px) rotateZ(-0.3deg); filter: blur(4px); }
            75% { opacity: 0.8; filter: blur(3px); }
            100% { transform: translateX(0%) translateY(-5px) rotateZ(0deg); opacity: 0.6; filter: blur(2px); }
        }
        /* 慢速风沙层 - 模拟高空沙尘 */
        @keyframes sandstorm-slow {
            0% { background-position: -200% 0; transform: translateY(5px) rotateZ(0deg); opacity: 0.4; filter: blur(3px); }
            25% { opacity: 0.6; filter: blur(4px); }
            50% { opacity: 0.8; background-position: -100% 0; transform: translateY(0px) rotateZ(0.2deg); filter: blur(5px); }
            75% { opacity: 0.6; filter: blur(4px); }
            100% { background-position: 0% 0; transform: translateY(-5px) rotateZ(0deg); opacity: 0.4; filter: blur(3px); }
        }
        /* 非沙漠模式时隐藏风沙效果 */
        body:not(.dew-mode):not(.ice-mode):not(.water-mode) .sandstorm {
            opacity: 1;
        }

        /* --- 晨露闪烁效果 --- */
        .dew-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.5s ease;
        }
        .dew-effect::before {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 20%),
                        radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.3) 0%, transparent 20%),
                        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 30%),
                        radial-gradient(circle at 10% 80%, rgba(255, 255, 255, 0.25) 0%, transparent 15%),
                        radial-gradient(circle at 90% 20%, rgba(255, 255, 255, 0.25) 0%, transparent 15%);
            animation: dew-flicker 5s ease-in-out infinite;
        }
        .dew-effect::after {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 30% 40%, rgba(173, 216, 230, 0.2) 0%, transparent 25%),
                        radial-gradient(circle at 70% 60%, rgba(173, 216, 230, 0.2) 0%, transparent 25%),
                        radial-gradient(circle at 40% 70%, rgba(173, 216, 230, 0.15) 0%, transparent 20%),
                        radial-gradient(circle at 60% 30%, rgba(173, 216, 230, 0.15) 0%, transparent 20%);
            animation: dew-flicker-slow 7s ease-in-out infinite;
        }
        @keyframes dew-flicker {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }
        @keyframes dew-flicker-slow {
            0%, 100% { opacity: 0.2; background-position: 0% 0%; }
            50% { opacity: 0.5; background-position: 10% 10%; }
        }
        /* 晨露模式时显示露珠效果 */
        body.dew-mode .dew-effect {
            opacity: 1;
        }

        /* --- 冰川冰晶效果 --- */
        .glacier-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.5s ease;
        }
        .glacier-effect::before {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.4) 0%, transparent 10%),
                        radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.4) 0%, transparent 15%),
                        radial-gradient(circle at 40% 60%, rgba(255, 255, 255, 0.3) 0%, transparent 20%),
                        radial-gradient(circle at 20% 70%, rgba(255, 255, 255, 0.35) 0%, transparent 12%),
                        radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.35) 0%, transparent 12%),
                        radial-gradient(circle at 10% 40%, rgba(255, 255, 255, 0.3) 0%, transparent 10%),
                        radial-gradient(circle at 90% 60%, rgba(255, 255, 255, 0.3) 0%, transparent 10%);
            animation: glacier-sparkle 3s ease-in-out infinite;
        }
        .glacier-effect::after {
            content: '';
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(173, 216, 230, 0.25) 0%, transparent 25%),
                        radial-gradient(circle at 30% 80%, rgba(173, 216, 230, 0.2) 0%, transparent 20%),
                        radial-gradient(circle at 70% 20%, rgba(173, 216, 230, 0.2) 0%, transparent 20%),
                        radial-gradient(circle at 60% 70%, rgba(173, 216, 230, 0.15) 0%, transparent 15%),
                        radial-gradient(circle at 40% 30%, rgba(173, 216, 230, 0.15) 0%, transparent 15%);
            animation: glacier-sparkle-slow 5s ease-in-out infinite;
        }
        @keyframes glacier-sparkle {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        @keyframes glacier-sparkle-slow {
            0%, 100% { opacity: 0.3; transform: scale(1) rotate(0deg); }
            50% { opacity: 0.8; transform: scale(1.05) rotate(5deg); }
        }
        /* 冰川模式时显示冰晶效果 */
        body.ice-mode .glacier-effect {
            opacity: 1;
        }

        /* 水域模式可额外提升整体透亮感 */
        body.water-mode .dew-effect { opacity: 0.35; }
        body.water-mode .glacier-effect { opacity: 0.15; }

        /* --- 液态感应按钮 --- */
        .btn-liquid {
            position: relative;
            background: transparent;
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            overflow: hidden;
            transition: all 0.5s;
            backdrop-filter: blur(5px);
        }
        .btn-liquid::before {
            content: '';
            position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: all 0.6s;
        }
        .btn-liquid:hover {
            border-color: var(--theme-color);
            box-shadow: 0 0 30px var(--theme-color);
            transform: translateY(-3px);
        }
        .btn-liquid:hover::before { left: 100%; }
        body.dew-mode .btn-liquid:hover { --theme-color: #00d2ff; }
        body.ice-mode .btn-liquid:hover { --theme-color: #87cefa; }
        body.water-mode .btn-liquid:hover { --theme-color: #00ffd5; }
        body:not(.dew-mode):not(.ice-mode):not(.water-mode) .btn-liquid:hover { --theme-color: #ffbd59; }

        .nav-panel-backdrop {
            position: fixed;
            inset: 0;
            z-index: 60;
            background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.08) 0%, rgba(0,0,0,0.88) 55%, rgba(0,0,0,0.92) 100%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 420ms ease;
        }
        .nav-panel-backdrop.show {
            opacity: 1;
            pointer-events: auto;
        }

        .nav-panel {
            position: absolute;
            left: 50%;
            top: 50%;
            width: min(980px, calc(100% - 2.5rem));
            transform: translate(-50%, calc(-50% + 14px));
            opacity: 0;
            transition: opacity 420ms ease, transform 420ms ease;
        }
        .nav-panel-backdrop.show .nav-panel {
            opacity: 1;
            transform: translate(-50%, -50%);
        }

        .nav-panel-shell {
            border-radius: 28px;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255,255,255,0.22);
            -webkit-backdrop-filter: blur(22px) saturate(1.18);
            backdrop-filter: blur(22px) saturate(1.18);
            box-shadow:
                0 28px 110px rgba(0,0,0,0.45),
                inset 0 1px 0 rgba(255,255,255,0.28),
                inset 0 -1px 0 rgba(255,255,255,0.08);
            overflow: hidden;
        }

        .nav-panel-hairline {
            height: 1px;
            width: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent);
        }

        .nav-panel-close {
            appearance: none;
            border: 1px solid rgba(255,255,255,0.16);
            background: rgba(0,0,0,0.35);
            color: rgba(255,255,255,0.85);
            border-radius: 999px;
            padding: 10px 14px;
            transition: transform 220ms ease, border-color 220ms ease, color 220ms ease;
        }
        .nav-panel-close:hover {
            transform: translateY(-1px);
            border-color: rgba(255,255,255,0.28);
            color: rgba(255,255,255,1);
        }

        .nav-chip {
            border: 1px solid rgba(255,255,255,0.14);
            background: rgba(255,255,255,0.04);
        }

    </style>
</head>
<body id="main-body" class="text-white h-screen flex flex-col">

    <div class="video-container">
        <!-- 使用背景图片替代视频，避免跨域问题 -->
        <div id="video-desert" class="bg-video"></div>
        <div id="video-dew" class="bg-video"></div>
        <div id="video-ice" class="bg-video"></div>
        <div id="video-water" class="bg-video"></div>
    </div>
    <div class="overlay-dynamic"></div>
    <canvas id="fx-canvas"></canvas>
    <div class="sandstorm"></div>
    <div class="dew-effect"></div>
    <div class="glacier-effect"></div>


    <nav class="glass-nav flex justify-between items-center px-8 py-6 fixed w-full z-50">
        <div class="text-3xl font-bold tracking-[0.2em] hero-title dynamic-text">SHENGSHUI</div>
        <div class="hidden md:flex space-x-12 text-xs tracking-[0.2em] uppercase font-medium">
            <a href="#" class="hover:text-white/70 transition" data-nav-panel="source">The Source</a>
            <a href="#" class="hover:text-white/70 transition" data-nav-panel="purification">Purification</a>
            <a href="#" class="hover:text-white/70 transition" data-nav-panel="lifestyle">Lifestyle</a>
        </div>
    </nav>

    <main class="flex-grow flex flex-col justify-center items-center text-center px-4 relative z-10">
        
        <div id="sub-headline" class="text-sm md:text-base tracking-[0.5em] uppercase mb-6 font-light dynamic-text transition-all duration-1000">
            · 感受生命的极度渴望 ·
        </div>

        <h1 class="text-6xl md:text-9xl hero-title mb-10 leading-none">
            圣水<br>
            <span class="dynamic-text font-thin block mt-2 text-4xl md:text-6xl">SHENGSHUI</span>
        </h1>

        <p id="hero-desc" class="text-lg md:text-2xl text-gray-200 max-w-2xl font-light italic mb-16 transition-all duration-1000 h-20 flex items-center justify-center">
            发现每一滴的价值。
        </p>

        <div class="flex flex-col md:flex-row space-y-5 md:space-y-0 md:space-x-8">
            <a href="./products.html" class="btn-liquid px-14 py-5 rounded-full text-lg font-bold tracking-widest">
                即刻润泽感官
            </a>
        </div>

    </main>

    <div id="nav-panel-backdrop" class="nav-panel-backdrop">
        <div class="nav-panel">
            <div class="nav-panel-shell">
                <div class="px-7 md:px-10 pt-8 md:pt-10 pb-7 md:pb-9">
                    <div class="flex items-start justify-between gap-6">
                        <div>
                            <div id="nav-panel-kicker" class="text-[11px] tracking-[0.55em] uppercase text-white/60">THE SOURCE</div>
                            <div id="nav-panel-title" class="hero-title text-2xl md:text-4xl mt-4 leading-tight">以水源定义奢侈标准</div>
                        </div>
                        <button id="nav-panel-close" class="nav-panel-close text-xs tracking-[0.25em] uppercase">Close</button>
                    </div>
                    <div class="mt-7 md:mt-8 nav-panel-hairline"></div>
                    <div class="mt-7 md:mt-8 grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-10">
                        <div class="md:col-span-7">
                            <div id="nav-panel-lead" class="text-base md:text-lg text-white/80 leading-relaxed">
                                一瓶水的价值，从来不止于解渴，而在于它所承载的地貌、时间与纯度。
                            </div>
                            <div id="nav-panel-body" class="mt-6 text-sm md:text-base text-white/60 leading-relaxed space-y-5">
                                <div>我们以“源头可追溯”为第一原则：从产地环境、矿物结构到微量元素比例，形成稳定且可被验证的风味与口感轮廓。</div>
                                <div>真正的奢侈，是选择更少的干预，让自然完成更多的工作——让每一滴都拥有清晰的身份。</div>
                            </div>
                        </div>
                        <div class="md:col-span-5">
                            <div class="grid grid-cols-1 gap-4">
                                <div class="nav-chip rounded-2xl px-6 py-5">
                                    <div class="text-[11px] tracking-[0.45em] uppercase text-white/55">Traceability</div>
                                    <div class="mt-3 text-white/80 text-sm leading-relaxed">水源地信息透明可验证，标准化记录与长期稳定性控制。</div>
                                </div>
                                <div class="nav-chip rounded-2xl px-6 py-5">
                                    <div class="text-[11px] tracking-[0.45em] uppercase text-white/55">Mineral Profile</div>
                                    <div class="mt-3 text-white/80 text-sm leading-relaxed">矿物结构决定口感层次：柔和、清冽、回甘与余韵的秩序。</div>
                                </div>
                                <div class="nav-chip rounded-2xl px-6 py-5">
                                    <div class="text-[11px] tracking-[0.45em] uppercase text-white/55">Ritual</div>
                                    <div class="mt-3 text-white/80 text-sm leading-relaxed">把饮水从“日常动作”提升为“仪式”，在细节中感知自我与世界。</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="absolute bottom-8 w-full text-center text-xs text-white/40 tracking-widest uppercase z-20">
        Copyright ©2025 Shengshui All Rights Reserved. <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">京ICP备15004867号-3</a>
    </footer>

    <script>
        // --- 核心逻辑：四种模式切换（沙漠、晨露、冰川、水域） ---

        const body = document.getElementById('main-body');
        const subHeadline = document.getElementById('sub-headline');
        const heroDesc = document.getElementById('hero-desc');

        const navPanelBackdrop = document.getElementById('nav-panel-backdrop');
        const navPanelClose = document.getElementById('nav-panel-close');
        const navPanelKicker = document.getElementById('nav-panel-kicker');
        const navPanelTitle = document.getElementById('nav-panel-title');
        const navPanelLead = document.getElementById('nav-panel-lead');
        const navPanelBody = document.getElementById('nav-panel-body');

        const navPanelCopy = {
            source: {
                kicker: 'THE SOURCE',
                title: '以水源定义奢侈标准',
                lead: '一瓶水的价值，从来不止于解渴，而在于它所承载的地貌、时间与纯度。',
                body: [
                    '我们以“源头可追溯”为第一原则：从产地环境、矿物结构到微量元素比例，形成稳定且可被验证的风味与口感轮廓。',
                    '真正的奢侈，是选择更少的干预，让自然完成更多的工作——让每一滴都拥有清晰的身份。'
                ]
            },
            purification: {
                kicker: 'PURIFICATION',
                title: '净化，是对纯度的敬畏',
                lead: '纯净不是“无”，而是“恰到好处的保留”：去除杂质，保留自然的矿物秩序。',
                body: [
                    '我们采用多重物理净化与精密过滤策略，重点控制异味、浑浊与微粒，确保入口的清澈与层次。',
                    '每一次处理都以“低干预”为前提：不改变水的原生结构与风味骨架，让纯净回归本来。'
                ]
            },
            lifestyle: {
                kicker: 'LIFESTYLE',
                title: '把喝水变成你的奢华生活方式',
                lead: '水是你每天最稳定的投入，也是最容易被忽略的升级项。让它成为你生活质感的底色。',
                body: [
                    '从清晨第一口到夜晚收尾，我们建议以不同矿物轮廓匹配不同场景：醒脑、舒缓、搭配轻食或社交。',
                    '一个更好的饮水系统，意味着更清晰的节律与更高级的自我照顾：少而精，稳定且可持续。'
                ]
            }
        };

        function openNavPanel(key) {
            const c = navPanelCopy[key];
            if (!c) return;
            navPanelKicker.textContent = c.kicker;
            navPanelTitle.textContent = c.title;
            navPanelLead.textContent = c.lead;
            navPanelBody.innerHTML = c.body.map(t => `<div>${t}</div>`).join('');
            navPanelBackdrop.classList.add('show');
        }

        function closeNavPanel() {
            navPanelBackdrop.classList.remove('show');
        }

        document.querySelectorAll('[data-nav-panel]').forEach((a) => {
            a.addEventListener('click', (e) => {
                e.preventDefault();
                openNavPanel(a.getAttribute('data-nav-panel'));
            });
        });

        navPanelClose.addEventListener('click', () => closeNavPanel());
        navPanelBackdrop.addEventListener('click', (e) => {
            if (e.target === navPanelBackdrop) closeNavPanel();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeNavPanel();
        });

        const fxCanvas = document.getElementById('fx-canvas');

        class FXEngine {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d', { alpha: true });
                this.dpr = Math.min(window.devicePixelRatio || 1, 2);
                this.mode = 'desert';
                this.particles = [];
                this.bokeh = [];
                this.t = 0;
                this.last = performance.now();
                this.running = true;
                this.prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

                this.handleResize = this.handleResize.bind(this);
                window.addEventListener('resize', this.handleResize, { passive: true });
                this.handleResize();
                this.seed();

                if (this.prefersReduced) {
                    this.running = false;
                    this.clear();
                    return;
                }

                requestAnimationFrame((now) => this.frame(now));
            }

            handleResize() {
                const w = Math.max(1, window.innerWidth);
                const h = Math.max(1, window.innerHeight);
                this.w = w;
                this.h = h;
                this.canvas.width = Math.floor(w * this.dpr);
                this.canvas.height = Math.floor(h * this.dpr);
                this.ctx.setTransform(this.dpr, 0, 0, this.dpr, 0, 0);
                this.seed();
            }

            clear() {
                this.ctx.clearRect(0, 0, this.w, this.h);
            }

            setMode(mode) {
                this.mode = mode;
                this.seed(true);
            }

            seed(reset = false) {
                const area = this.w * this.h;
                const density = Math.max(0.6, Math.min(1.2, area / (1400 * 900)));
                const maxP = Math.floor(120 * density);
                const maxB = Math.floor(26 * density);

                if (reset) {
                    this.particles.length = 0;
                    this.bokeh.length = 0;
                }

                while (this.particles.length < maxP) {
                    this.particles.push(this.makeParticle());
                }
                while (this.particles.length > maxP) {
                    this.particles.pop();
                }
                while (this.bokeh.length < maxB) {
                    this.bokeh.push(this.makeBokeh());
                }
                while (this.bokeh.length > maxB) {
                    this.bokeh.pop();
                }
            }

            rand(a, b) {
                return a + Math.random() * (b - a);
            }

            makeParticle() {
                const p = {
                    x: this.rand(0, this.w),
                    y: this.rand(0, this.h),
                    vx: 0,
                    vy: 0,
                    r: this.rand(0.6, 2.2),
                    a: this.rand(0.05, 0.35),
                    tw: this.rand(0.5, 1.4),
                    ph: this.rand(0, Math.PI * 2)
                };
                return p;
            }

            makeBokeh() {
                const b = {
                    x: this.rand(-this.w * 0.2, this.w * 1.2),
                    y: this.rand(-this.h * 0.2, this.h * 1.2),
                    r: this.rand(30, 140),
                    a: this.rand(0.02, 0.10),
                    vx: this.rand(-6, 6),
                    vy: this.rand(-6, 6),
                    ph: this.rand(0, Math.PI * 2)
                };
                return b;
            }

            frame(now) {
                if (!this.running) return;
                const dt = Math.min(0.05, Math.max(0.001, (now - this.last) / 1000));
                this.last = now;
                this.t += dt;

                this.ctx.clearRect(0, 0, this.w, this.h);
                this.ctx.globalCompositeOperation = 'source-over';

                if (this.mode === 'desert') {
                    this.drawDesert(dt);
                } else if (this.mode === 'dew') {
                    this.drawDew(dt);
                } else if (this.mode === 'ice') {
                    this.drawIce(dt);
                } else if (this.mode === 'water') {
                    this.drawWater(dt);
                }

                requestAnimationFrame((n) => this.frame(n));
            }

            drawDesert(dt) {
                const ctx = this.ctx;
                const wind = 70;
                const angle = -Math.PI / 12;
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);
                ctx.save();
                ctx.globalAlpha = 1;
                ctx.globalCompositeOperation = 'lighter';

                for (const p of this.particles) {
                    const speed = wind * (0.6 + 0.8 * p.tw);
                    p.vx = cos * speed;
                    p.vy = sin * speed + 6 * Math.sin(this.t * 0.8 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;

                    if (p.x > this.w + 60 || p.y < -60) {
                        p.x = -60;
                        p.y = this.rand(this.h * 0.15, this.h * 1.05);
                    }

                    const len = 10 + 28 * p.tw;
                    const x2 = p.x - cos * len;
                    const y2 = p.y - sin * len;
                    ctx.strokeStyle = `rgba(255, 210, 160, ${p.a * 0.55})`;
                    ctx.lineWidth = 0.9;
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                }

                ctx.restore();
            }

            drawDew(dt) {
                const ctx = this.ctx;
                ctx.save();
                ctx.globalCompositeOperation = 'screen';

                for (const b of this.bokeh) {
                    b.x += (b.vx * 0.15 + 10 * Math.sin(this.t * 0.35 + b.ph)) * dt;
                    b.y += (b.vy * 0.15 + 8 * Math.cos(this.t * 0.3 + b.ph)) * dt;

                    if (b.x < -this.w * 0.25) b.x = this.w * 1.25;
                    if (b.x > this.w * 1.25) b.x = -this.w * 0.25;
                    if (b.y < -this.h * 0.25) b.y = this.h * 1.25;
                    if (b.y > this.h * 1.25) b.y = -this.h * 0.25;

                    const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, b.r);
                    g.addColorStop(0, `rgba(210, 255, 250, ${b.a})`);
                    g.addColorStop(0.35, `rgba(160, 230, 255, ${b.a * 0.55})`);
                    g.addColorStop(1, 'rgba(0, 0, 0, 0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalCompositeOperation = 'lighter';
                for (const p of this.particles) {
                    p.vx = 8 + 10 * Math.sin(this.t * 0.8 + p.ph);
                    p.vy = -10 + 8 * Math.cos(this.t * 0.7 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    if (p.x > this.w + 30) p.x = -30;
                    if (p.y < -30) p.y = this.h + 30;

                    const r = 0.8 + 1.8 * (0.5 + 0.5 * Math.sin(this.t * 1.6 + p.ph));
                    ctx.fillStyle = `rgba(255, 255, 255, ${p.a * 0.35})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }

            drawIce(dt) {
                const ctx = this.ctx;
                ctx.save();
                ctx.globalCompositeOperation = 'screen';

                for (const p of this.particles) {
                    const driftX = 10 * Math.sin(this.t * 0.6 + p.ph);
                    p.vx = driftX;
                    p.vy = 18 + 22 * p.tw;
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    if (p.y > this.h + 40) {
                        p.y = -40;
                        p.x = this.rand(-20, this.w + 20);
                    }

                    const s = 0.6 + 1.2 * p.tw;
                    const tw = 0.45 + 0.55 * Math.sin(this.t * 2.2 + p.ph);
                    ctx.fillStyle = `rgba(235, 250, 255, ${(0.05 + 0.22 * tw) * 0.7})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, s, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalCompositeOperation = 'lighter';
                for (let i = 0; i < this.bokeh.length; i++) {
                    const b = this.bokeh[i];
                    b.x += 6 * Math.sin(this.t * 0.25 + b.ph) * dt;
                    b.y += 8 * Math.cos(this.t * 0.22 + b.ph) * dt;
                    const r = b.r * 0.75;
                    const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, r);
                    g.addColorStop(0, `rgba(255,255,255,${b.a * 0.55})`);
                    g.addColorStop(0.55, `rgba(180,230,255,${b.a * 0.35})`);
                    g.addColorStop(1, 'rgba(0,0,0,0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }

            drawWater(dt) {
                const ctx = this.ctx;
                ctx.save();
                ctx.globalCompositeOperation = 'screen';
                const w = this.w;
                const h = this.h;

                const t = this.t;
                const cx = w * 0.5;
                const cy = h * 0.55;
                const base = Math.max(w, h) * 0.8;
                for (let i = 0; i < 5; i++) {
                    const k = i + 1;
                    const r = base * (0.18 + 0.12 * k) * (1 + 0.02 * Math.sin(t * (0.4 + 0.1 * k)));
                    const ox = cx + Math.sin(t * (0.22 + 0.06 * k) + i) * w * 0.08;
                    const oy = cy + Math.cos(t * (0.18 + 0.05 * k) + i) * h * 0.06;
                    const g = ctx.createRadialGradient(ox, oy, 0, ox, oy, r);
                    g.addColorStop(0, `rgba(0, 255, 210, ${0.08 - i * 0.012})`);
                    g.addColorStop(0.45, `rgba(0, 210, 255, ${0.06 - i * 0.010})`);
                    g.addColorStop(1, 'rgba(0,0,0,0)');
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(ox, oy, r, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.globalCompositeOperation = 'lighter';
                for (const p of this.particles) {
                    p.vx = 18 + 14 * Math.sin(t * 0.9 + p.ph);
                    p.vy = 4 + 8 * Math.cos(t * 0.8 + p.ph);
                    p.x += p.vx * dt;
                    p.y += p.vy * dt;
                    if (p.x > w + 30) p.x = -30;
                    if (p.y > h + 30) p.y = -30;
                    const rr = 0.8 + 1.6 * p.tw;
                    ctx.fillStyle = `rgba(255,255,255,${p.a * 0.25})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, rr, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            }
        }

        const fx = new FXEngine(fxCanvas);

        const bgLayers = {
            desert: document.getElementById('video-desert'),
            dew: document.getElementById('video-dew'),
            ice: document.getElementById('video-ice'),
            water: document.getElementById('video-water')
        };

        const imagePool = {
            desert: [
                'photo-1451418280345-67a6b4d10bba.avif',
                'photo-1470364798856-7a74180378dc.avif',
                'photo-1489493173507-6feea31f12ff.avif',
                'photo-1506316178580-fe3a431d65b5.avif',
                'photo-1531430550463-9658d67c492d.avif',
                'photo-1554147090-e1221a04a025.avif',
                'photo-1559160581-44bd4222d397.avif',
                'photo-1559586616-361e18714958.avif',
                'photo-1587321174565-73cffc72e10a.avif',
                'photo-1593956861273-5c74c3d0d8a8.avif'
            ],
            dew: [
                'photo-1470004914212-05527e49370b_compressed (1) (1)_compressed_compressed.jpeg',
                'photo-1482192596544-9eb780fc7f66.avif',
                'photo-1523712999610-f77fbcfc3843.avif',
                'photo-1591095595140-5d351fde3f1a.avif',
                'photo-1600539507015-b01a9f4284c2.avif',
                'photo-1603663716376-95642cc5db05.avif',
                'photo-1608958683988-b25e2b327bb4.avif',
                'photo-1620835827006-84fa63476dd9.avif',
                'photo-1632109204511-e1b3416f61a9.avif',
                'photo-1651766466581-ab0aa5f5ecdf.avif',
                'photo-1668351734682-cf7ea0dbc030.avif',
                'photo-1706414012102-cdc56450124a.avif'
            ],
            ice: [
                'ice.jpeg',
                'photo-1459666644539-a9755287d6b0.avif',
                'photo-1494564605686-2e931f77a8e2.avif',
                'photo-1507039915464-9d829b6d2d78.avif',
                'photo-1535752385016-16aa049b6a8d.avif',
                'photo-1690286629800-efe2a219343f.avif'
            ],
            water: [
                'photo-1497436072909-60f360e1d4b1.avif',
                'photo-1549285107-585b63dbcee8.avif',
                'photo-1588847249519-06a31e3428dd.avif',
                'photo-1615529328331-f8917597711f.avif',
                'photo-1657549918210-5390583fb598.avif',
                'photo-1657549918210-659580c024d7.avif'
            ]
        };

        const lastPick = {
            desert: null,
            dew: null,
            ice: null,
            water: null
        };

        function pickRandom(mode) {
            const list = imagePool[mode] || [];
            if (!list.length) return null;

            if (list.length === 1) return list[0];

            let next = list[Math.floor(Math.random() * list.length)];
            if (lastPick[mode] && list.length > 1) {
                let guard = 0;
                while (next === lastPick[mode] && guard < 10) {
                    next = list[Math.floor(Math.random() * list.length)];
                    guard += 1;
                }
            }
            lastPick[mode] = next;
            return next;
        }

        function setRandomBackground(mode) {
            const file = pickRandom(mode);
            if (!file) return;
            const raw = `resource/images/${mode}/${file}`;
            const url = encodeURI(raw);
            bgLayers[mode].style.backgroundImage = `url('${url}')`;
        }

        // 定义四种模式的文案
        const content = {
            desert: {
                sub: "· 感受生命的极度渴望 ·",
                desc: "当世界干涸，唯有一滴纯净，值得你不远万里。"
            },
            dew: {
                sub: "· 沉浸自然的极致滋养 ·",
                desc: "源自晨曦微露的刹那，让每一个细胞重新呼吸。"
            },
            ice: {
                sub: "· 体验极地的纯净力量 ·",
                desc: "来自冰原深处的馈赠，历经千年淬炼的极致纯净。"
            },
            water: {
                sub: "· 源自自然的圣水 ·",
                desc: "以矿物与时间雕刻的层次感，入口即是高级的宁静。"
            }
        };

        let currentMode = 0; // 0=沙漠, 1=晨露, 2=冰川, 3=水域
        const modes = ['desert', 'dew', 'ice', 'water'];

        function applyModeClass(nextMode) {
            body.classList.remove('dew-mode', 'ice-mode', 'water-mode');

            if (nextMode === 'dew') {
                body.classList.add('dew-mode');
            } else if (nextMode === 'ice') {
                body.classList.add('ice-mode');
            } else if (nextMode === 'water') {
                body.classList.add('water-mode');
            }
        }

        function setThemeColor(nextMode) {
            const theme = {
                desert: '#ffbd59',
                dew: '#00d2ff',
                ice: '#87cefa',
                water: '#00ffd5'
            };
            document.documentElement.style.setProperty('--theme-color', theme[nextMode] || '#00d2ff');
        }

        function enterMode(nextMode) {
            applyModeClass(nextMode);
            setThemeColor(nextMode);
            setRandomBackground(nextMode);
            fx.setMode(nextMode);

            subHeadline.style.opacity = 0;
            heroDesc.style.opacity = 0;

            setTimeout(() => {
                subHeadline.innerText = content[nextMode].sub;
                heroDesc.innerText = content[nextMode].desc;
                subHeadline.style.opacity = 1;
                heroDesc.style.opacity = 1;
            }, 750);
        }

        function toggleMode() {
            currentMode = (currentMode + 1) % 4;
            const nextMode = modes[currentMode];
            enterMode(nextMode);
        }

        // 初始化：先落在沙漠，并随机一张沙漠图
        applyModeClass('desert');
        setThemeColor('desert');
        setRandomBackground('desert');
        fx.setMode('desert');
        setRandomBackground('dew');
        setRandomBackground('ice');
        setRandomBackground('water');

        // 设置定时切换，例如每 7 秒切换一次场景（首次延迟执行）
        setTimeout(() => {
            toggleMode();
            setInterval(toggleMode, 7000);
        }, 3000);

    </script>
</body>
</html>